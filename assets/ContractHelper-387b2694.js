import{I as w,J as or,K as sr,L as ar,M as ur,N as Ut,O as cr,S as St,P as bt,Q as kt,R as $t,T as Nt,U as lr,V as fr,W as Rt,X as hr,E as pr,Y as at,v as J,Z as dr,$ as At,x as b,b as z,D as _t,a0 as It,a1 as Ct,a2 as yr,z as M,g as K,A as Q,u as it,y as Ft,n as gr,C as Z}from"./index-ea318282.js";function B(i,a=!1){switch(i.type){case w.BoolTrue:return!0;case w.BoolFalse:return!1;case w.Int:case w.UInt:return a?i.value.toString():i.value;case w.Buffer:return`0x${sr(i.buffer)}`;case w.OptionalNone:return null;case w.OptionalSome:return Y(i.value);case w.ResponseErr:return Y(i.value);case w.ResponseOk:return Y(i.value);case w.PrincipalStandard:case w.PrincipalContract:return or(i);case w.List:return i.list.map(f=>Y(f));case w.Tuple:const l={};return Object.keys(i.data).forEach(f=>{l[f]=Y(i.data[f])}),l;case w.StringASCII:return i.data;case w.StringUTF8:return i.data}}function Y(i){switch(i.type){case w.ResponseErr:return{type:O(i),value:B(i,!0),success:!1};case w.ResponseOk:return{type:O(i),value:B(i,!0),success:!0};default:return{type:O(i),value:B(i,!0)}}}function O(i){switch(i.type){case w.BoolTrue:case w.BoolFalse:return"bool";case w.Int:return"int";case w.UInt:return"uint";case w.Buffer:return`(buff ${i.buffer.length})`;case w.OptionalNone:return"(optional none)";case w.OptionalSome:return`(optional ${O(i.value)})`;case w.ResponseErr:return`(response UnknownType ${O(i.value)})`;case w.ResponseOk:return`(response ${O(i.value)} UnknownType)`;case w.PrincipalStandard:case w.PrincipalContract:return"principal";case w.List:return`(list ${i.list.length} ${i.list.length?O(i.list[0]):"UnknownType"})`;case w.Tuple:return`(tuple ${Object.keys(i.data).map(a=>`(${a} ${O(i.data[a])})`).join(" ")})`;case w.StringASCII:return`(string-ascii ${ur(i.data).length})`;case w.StringUTF8:return`(string-utf8 ${ar(i.data).length})`}}function Mt(i,a,l){return typeof i=="string"&&(i=Ut(i)),{type:St.PostCondition,conditionType:bt.STX,principal:i,conditionCode:a,amount:kt(l,!1)}}function Pt(i,a,l,f){return typeof i=="string"&&(i=Ut(i)),typeof f=="string"&&(f=cr(f)),{type:St.PostCondition,conditionType:bt.Fungible,principal:i,conditionCode:a,amount:kt(l,!1),assetInfo:f}}function ot(i,a,l){return Mt($t(i),a,l)}function st(i,a,l,f){return Mt(Nt(i,a),l,f)}function mr(i,a,l,f){return Pt($t(i),a,l,f)}function Tt(i,a,l,f,h){return Pt(Nt(i,a),l,f,h)}async function _(i){const a={network:new lr},l=Object.assign(a,i),{contractName:f,contractAddress:h,functionName:d,functionArgs:p,senderAddress:s}=l,m=fr.fromNameOrNetwork(l.network),A=m.getReadOnlyFunctionCallApiUrl(h,f,d),T=p.map(F=>Rt(F)),U=JSON.stringify({sender:s,arguments:T}),k=await m.fetchFn(A,{method:"POST",body:U,headers:{"Content-Type":"application/json"}});if(!k.ok){const F=await k.text().catch(()=>"");throw new Error(`Error calling read-only function. Response ${k.status}: ${k.statusText}. Attempted to fetch ${A} and failed with the message: "${F}"`)}return k.json().then(F=>hr(F))}const v={alert(i,a){a||(a={}),pr.alert(i,a.title,{confirmButtonText:a.btnText?a.btnText:"Ok",dangerouslyUseHTMLString:!0})},alertInvalidAddress(){this.alert("Address invalid")},buffer2Str(i){i.startsWith("0x")&&(i=i.substr(2));let a="";for(let l=0;l<i.length;l+=2){const f=i.substr(l,2),h=parseInt(f,16);a+=String.fromCharCode(h)}return a},trimLower(i){return i&&i.trim().toLowerCase()},parseAddress(i){if(!i||i.trim().length<=0)return null;try{const a=i.trim().split(".");return a.length==1?at(a[0]):J(a[0],a[1])}catch{return null}},thousandNumStr(i){return i.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1,")},sip10BalanceToStr(i){for(i.length<7?i="0."+"0".repeat(6-i.length)+i:i=i.substring(0,i.length-6)+"."+i.substring(i.length-6);i.endsWith("0")&&i.length>1;)i=i.substring(0,i.length-1);return i.endsWith(".")&&(i=i.substring(0,i.length-1)),i},blobToBase64(i,a){const l=new FileReader;l.onload=function(){const h=l.result.split(",")[1];a(h)},l.readAsDataURL(i)},base64ToBlob(i,a){const l=atob(i),f=new Array(l.length);for(let d=0;d<l.length;d++)f[d]=l.charCodeAt(d);const h=new Uint8Array(f);return new Blob([h],{type:a})},getBriefAddress(i){if(i)return i.substr(0,4)+".."+i.substr(i.length-4)},formatTime(i){var a=new Date(i*1e3);return`${a.getFullYear()}-${(a.getMonth()+1).toString().padStart(2,"0")}-${a.getDate().toString().padStart(2,"0")} ${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`},formatPriceUnit(i,a){if(!a)return{priceUnitStr:"-",sub:null};if(i=i*BigInt(Math.round(a*100))/100n,i>=100000000000000n){let h=(i/100000000000n).toString();return h=h.substring(0,h.length-3)+"."+h.substring(h.length-3),{priceUnitStr:this.trimDecimalSuffix0(h),sub:null}}if(i>=100000000n){let h=i.toString();return h="0."+"0".repeat(14-h.length)+h,h=h.substring(0,9),{priceUnitStr:this.trimDecimalSuffix0(h),sub:null}}let l=i.toString();const f=14-l.length;return l=l.toString().substring(0,5).replace(/(0+)$/g,""),{priceUnitStr:l,sub:f}},trimDecimalSuffix0(i){return i.indexOf(".")!=-1&&(i=i.replace(/(0+)$/g,""),i.endsWith(".")&&(i=i.substring(0,i.length-1))),i},formatAmount(i){if(i>=1000000000n){let a=(i/1000000n).toString();return a=a.substring(0,a.length-3)+"."+a.substring(a.length-3),this.trimDecimalSuffix0(a)+" b"}return i.toString()}};var Ot={},ut={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ut.read=function(i,a,l,f,h){var d,p,s=h*8-f-1,m=(1<<s)-1,A=m>>1,T=-7,U=l?h-1:0,k=l?-1:1,F=i[a+U];for(U+=k,d=F&(1<<-T)-1,F>>=-T,T+=s;T>0;d=d*256+i[a+U],U+=k,T-=8);for(p=d&(1<<-T)-1,d>>=-T,T+=f;T>0;p=p*256+i[a+U],U+=k,T-=8);if(d===0)d=1-A;else{if(d===m)return p?NaN:(F?-1:1)*(1/0);p=p+Math.pow(2,f),d=d-A}return(F?-1:1)*p*Math.pow(2,d-f)};ut.write=function(i,a,l,f,h,d){var p,s,m,A=d*8-h-1,T=(1<<A)-1,U=T>>1,k=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=f?0:d-1,j=f?1:-1,H=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(s=isNaN(a)?1:0,p=T):(p=Math.floor(Math.log(a)/Math.LN2),a*(m=Math.pow(2,-p))<1&&(p--,m*=2),p+U>=1?a+=k/m:a+=k*Math.pow(2,1-U),a*m>=2&&(p++,m/=2),p+U>=T?(s=0,p=T):p+U>=1?(s=(a*m-1)*Math.pow(2,h),p=p+U):(s=a*Math.pow(2,U-1)*Math.pow(2,h),p=0));h>=8;i[l+F]=s&255,F+=j,s/=256,h-=8);for(p=p<<h|s,A+=h;A>0;i[l+F]=p&255,F+=j,p/=256,A-=8);i[l+F-j]|=H*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const a=dr,l=ut,f=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=s,i.SlowBuffer=Lt,i.INSPECT_MAX_BYTES=50;const h=2147483647;i.kMaxLength=h,s.TYPED_ARRAY_SUPPORT=d(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function p(e){if(e>h)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return U(e)}return m(e,t,r)}s.poolSize=8192;function m(e,t,r){if(typeof e=="string")return k(e,t);if(ArrayBuffer.isView(e))return j(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(R(e,ArrayBuffer)||e&&R(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(R(e,SharedArrayBuffer)||e&&R(e.buffer,SharedArrayBuffer)))return H(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return s.from(n,t,r);const o=Dt(e);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return s.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}s.from=function(e,t,r){return m(e,t,r)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function A(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function T(e,t,r){return A(e),e<=0?p(e):t!==void 0?typeof r=="string"?p(e).fill(t,r):p(e).fill(t):p(e)}s.alloc=function(e,t,r){return T(e,t,r)};function U(e){return A(e),p(e<0?0:tt(e)|0)}s.allocUnsafe=function(e){return U(e)},s.allocUnsafeSlow=function(e){return U(e)};function k(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=ct(e,t)|0;let n=p(r);const o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}function F(e){const t=e.length<0?0:tt(e.length)|0,r=p(t);for(let n=0;n<t;n+=1)r[n]=e[n]&255;return r}function j(e){if(R(e,Uint8Array)){const t=new Uint8Array(e);return H(t.buffer,t.byteOffset,t.byteLength)}return F(e)}function H(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&r===void 0?n=new Uint8Array(e):r===void 0?n=new Uint8Array(e,t):n=new Uint8Array(e,t,r),Object.setPrototypeOf(n,s.prototype),n}function Dt(e){if(s.isBuffer(e)){const t=tt(e.length)|0,r=p(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||nt(e.length)?p(0):F(e);if(e.type==="Buffer"&&Array.isArray(e.data))return F(e.data)}function tt(e){if(e>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return e|0}function Lt(e){return+e!=e&&(e=0),s.alloc(+e)}s.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==s.prototype},s.compare=function(t,r){if(R(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),R(r,Uint8Array)&&(r=s.from(r,r.offset,r.byteLength)),!s.isBuffer(t)||!s.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let n=t.length,o=r.length;for(let u=0,c=Math.min(n,o);u<c;++u)if(t[u]!==r[u]){n=t[u],o=r[u];break}return n<o?-1:o<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return s.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;const o=s.allocUnsafe(r);let u=0;for(n=0;n<t.length;++n){let c=t[n];if(R(c,Uint8Array))u+c.length>o.length?(s.isBuffer(c)||(c=s.from(c)),c.copy(o,u)):Uint8Array.prototype.set.call(o,c,u);else if(s.isBuffer(c))c.copy(o,u);else throw new TypeError('"list" argument must be an Array of Buffers');u+=c.length}return o};function ct(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||R(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return et(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Et(e).length;default:if(o)return n?-1:et(e).length;t=(""+t).toLowerCase(),o=!0}}s.byteLength=ct;function qt(e,t,r){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Kt(this,t,r);case"utf8":case"utf-8":return ht(this,t,r);case"ascii":return Vt(this,t,r);case"latin1":case"binary":return zt(this,t,r);case"base64":return Gt(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Qt(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}s.prototype._isBuffer=!0;function D(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}s.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)D(this,r,r+1);return this},s.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)D(this,r,r+3),D(this,r+1,r+2);return this},s.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)D(this,r,r+7),D(this,r+1,r+6),D(this,r+2,r+5),D(this,r+3,r+4);return this},s.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?ht(this,0,t):qt.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:s.compare(this,t)===0},s.prototype.inspect=function(){let t="";const r=i.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},f&&(s.prototype[f]=s.prototype.inspect),s.prototype.compare=function(t,r,n,o,u){if(R(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),o===void 0&&(o=0),u===void 0&&(u=this.length),r<0||n>t.length||o<0||u>this.length)throw new RangeError("out of range index");if(o>=u&&r>=n)return 0;if(o>=u)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,o>>>=0,u>>>=0,this===t)return 0;let c=u-o,g=n-r;const I=Math.min(c,g),E=this.slice(o,u),C=t.slice(r,n);for(let x=0;x<I;++x)if(E[x]!==C[x]){c=E[x],g=C[x];break}return c<g?-1:g<c?1:0};function lt(e,t,r,n,o){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,nt(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0)if(o)r=0;else return-1;if(typeof t=="string"&&(t=s.from(t,n)),s.isBuffer(t))return t.length===0?-1:ft(e,t,r,n,o);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):ft(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function ft(e,t,r,n,o){let u=1,c=e.length,g=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;u=2,c/=2,g/=2,r/=2}function I(C,x){return u===1?C[x]:C.readUInt16BE(x*u)}let E;if(o){let C=-1;for(E=r;E<c;E++)if(I(e,E)===I(t,C===-1?0:E-C)){if(C===-1&&(C=E),E-C+1===g)return C*u}else C!==-1&&(E-=E-C),C=-1}else for(r+g>c&&(r=c-g),E=r;E>=0;E--){let C=!0;for(let x=0;x<g;x++)if(I(e,E+x)!==I(t,x)){C=!1;break}if(C)return E}return-1}s.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1},s.prototype.indexOf=function(t,r,n){return lt(this,t,r,n,!0)},s.prototype.lastIndexOf=function(t,r,n){return lt(this,t,r,n,!1)};function Wt(e,t,r,n){r=Number(r)||0;const o=e.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;const u=t.length;n>u/2&&(n=u/2);let c;for(c=0;c<n;++c){const g=parseInt(t.substr(c*2,2),16);if(nt(g))return c;e[r+c]=g}return c}function jt(e,t,r,n){return V(et(t,e.length-r),e,r,n)}function Ht(e,t,r,n){return V(rr(t),e,r,n)}function Xt(e,t,r,n){return V(Et(t),e,r,n)}function Yt(e,t,r,n){return V(er(t,e.length-r),e,r,n)}s.prototype.write=function(t,r,n,o){if(r===void 0)o="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")o=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,o===void 0&&(o="utf8")):(o=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const u=this.length-r;if((n===void 0||n>u)&&(n=u),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");let c=!1;for(;;)switch(o){case"hex":return Wt(this,t,r,n);case"utf8":case"utf-8":return jt(this,t,r,n);case"ascii":case"latin1":case"binary":return Ht(this,t,r,n);case"base64":return Xt(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Yt(this,t,r,n);default:if(c)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),c=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Gt(e,t,r){return t===0&&r===e.length?a.fromByteArray(e):a.fromByteArray(e.slice(t,r))}function ht(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const u=e[o];let c=null,g=u>239?4:u>223?3:u>191?2:1;if(o+g<=r){let I,E,C,x;switch(g){case 1:u<128&&(c=u);break;case 2:I=e[o+1],(I&192)===128&&(x=(u&31)<<6|I&63,x>127&&(c=x));break;case 3:I=e[o+1],E=e[o+2],(I&192)===128&&(E&192)===128&&(x=(u&15)<<12|(I&63)<<6|E&63,x>2047&&(x<55296||x>57343)&&(c=x));break;case 4:I=e[o+1],E=e[o+2],C=e[o+3],(I&192)===128&&(E&192)===128&&(C&192)===128&&(x=(u&15)<<18|(I&63)<<12|(E&63)<<6|C&63,x>65535&&x<1114112&&(c=x))}}c===null?(c=65533,g=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|c&1023),n.push(c),o+=g}return Jt(n)}const pt=4096;function Jt(e){const t=e.length;if(t<=pt)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=pt));return r}function Vt(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]&127);return n}function zt(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function Kt(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let u=t;u<r;++u)o+=nr[e[u]];return o}function Qt(e,t,r){const n=e.slice(t,r);let o="";for(let u=0;u<n.length-1;u+=2)o+=String.fromCharCode(n[u]+n[u+1]*256);return o}s.prototype.slice=function(t,r){const n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);const o=this.subarray(t,r);return Object.setPrototypeOf(o,s.prototype),o};function S(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||S(t,r,this.length);let o=this[t],u=1,c=0;for(;++c<r&&(u*=256);)o+=this[t+c]*u;return o},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||S(t,r,this.length);let o=this[t+--r],u=1;for(;r>0&&(u*=256);)o+=this[t+--r]*u;return o},s.prototype.readUint8=s.prototype.readUInt8=function(t,r){return t=t>>>0,r||S(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||S(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||S(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||S(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||S(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=P(function(t){t=t>>>0,W(t,"offset");const r=this[t],n=this[t+7];(r===void 0||n===void 0)&&X(t,this.length-8);const o=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,u=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(o)+(BigInt(u)<<BigInt(32))}),s.prototype.readBigUInt64BE=P(function(t){t=t>>>0,W(t,"offset");const r=this[t],n=this[t+7];(r===void 0||n===void 0)&&X(t,this.length-8);const o=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],u=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(o)<<BigInt(32))+BigInt(u)}),s.prototype.readIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||S(t,r,this.length);let o=this[t],u=1,c=0;for(;++c<r&&(u*=256);)o+=this[t+c]*u;return u*=128,o>=u&&(o-=Math.pow(2,8*r)),o},s.prototype.readIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||S(t,r,this.length);let o=r,u=1,c=this[t+--o];for(;o>0&&(u*=256);)c+=this[t+--o]*u;return u*=128,c>=u&&(c-=Math.pow(2,8*r)),c},s.prototype.readInt8=function(t,r){return t=t>>>0,r||S(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},s.prototype.readInt16LE=function(t,r){t=t>>>0,r||S(t,2,this.length);const n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n},s.prototype.readInt16BE=function(t,r){t=t>>>0,r||S(t,2,this.length);const n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n},s.prototype.readInt32LE=function(t,r){return t=t>>>0,r||S(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,r){return t=t>>>0,r||S(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=P(function(t){t=t>>>0,W(t,"offset");const r=this[t],n=this[t+7];(r===void 0||n===void 0)&&X(t,this.length-8);const o=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(o)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),s.prototype.readBigInt64BE=P(function(t){t=t>>>0,W(t,"offset");const r=this[t],n=this[t+7];(r===void 0||n===void 0)&&X(t,this.length-8);const o=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(o)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)}),s.prototype.readFloatLE=function(t,r){return t=t>>>0,r||S(t,4,this.length),l.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,r){return t=t>>>0,r||S(t,4,this.length),l.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||S(t,8,this.length),l.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||S(t,8,this.length),l.read(this,t,!1,52,8)};function $(e,t,r,n,o,u){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<u)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,r,n,o){if(t=+t,r=r>>>0,n=n>>>0,!o){const g=Math.pow(2,8*n)-1;$(this,t,r,n,g,0)}let u=1,c=0;for(this[r]=t&255;++c<n&&(u*=256);)this[r+c]=t/u&255;return r+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,r,n,o){if(t=+t,r=r>>>0,n=n>>>0,!o){const g=Math.pow(2,8*n)-1;$(this,t,r,n,g,0)}let u=n-1,c=1;for(this[r+u]=t&255;--u>=0&&(c*=256);)this[r+u]=t/c&255;return r+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,r,n){return t=+t,r=r>>>0,n||$(this,t,r,1,255,0),this[r]=t&255,r+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||$(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||$(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||$(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||$(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function dt(e,t,r,n,o){Bt(t,n,o,e,r,7);let u=Number(t&BigInt(4294967295));e[r++]=u,u=u>>8,e[r++]=u,u=u>>8,e[r++]=u,u=u>>8,e[r++]=u;let c=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=c,c=c>>8,e[r++]=c,c=c>>8,e[r++]=c,c=c>>8,e[r++]=c,r}function yt(e,t,r,n,o){Bt(t,n,o,e,r,7);let u=Number(t&BigInt(4294967295));e[r+7]=u,u=u>>8,e[r+6]=u,u=u>>8,e[r+5]=u,u=u>>8,e[r+4]=u;let c=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=c,c=c>>8,e[r+2]=c,c=c>>8,e[r+1]=c,c=c>>8,e[r]=c,r+8}s.prototype.writeBigUInt64LE=P(function(t,r=0){return dt(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=P(function(t,r=0){return yt(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(t,r,n,o){if(t=+t,r=r>>>0,!o){const I=Math.pow(2,8*n-1);$(this,t,r,n,I-1,-I)}let u=0,c=1,g=0;for(this[r]=t&255;++u<n&&(c*=256);)t<0&&g===0&&this[r+u-1]!==0&&(g=1),this[r+u]=(t/c>>0)-g&255;return r+n},s.prototype.writeIntBE=function(t,r,n,o){if(t=+t,r=r>>>0,!o){const I=Math.pow(2,8*n-1);$(this,t,r,n,I-1,-I)}let u=n-1,c=1,g=0;for(this[r+u]=t&255;--u>=0&&(c*=256);)t<0&&g===0&&this[r+u+1]!==0&&(g=1),this[r+u]=(t/c>>0)-g&255;return r+n},s.prototype.writeInt8=function(t,r,n){return t=+t,r=r>>>0,n||$(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1},s.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||$(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2},s.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||$(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2},s.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||$(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4},s.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||$(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4},s.prototype.writeBigInt64LE=P(function(t,r=0){return dt(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=P(function(t,r=0){return yt(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function gt(e,t,r,n,o,u){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function mt(e,t,r,n,o){return t=+t,r=r>>>0,o||gt(e,t,r,4),l.write(e,t,r,n,23,4),r+4}s.prototype.writeFloatLE=function(t,r,n){return mt(this,t,r,!0,n)},s.prototype.writeFloatBE=function(t,r,n){return mt(this,t,r,!1,n)};function wt(e,t,r,n,o){return t=+t,r=r>>>0,o||gt(e,t,r,8),l.write(e,t,r,n,52,8),r+8}s.prototype.writeDoubleLE=function(t,r,n){return wt(this,t,r,!0,n)},s.prototype.writeDoubleBE=function(t,r,n){return wt(this,t,r,!1,n)},s.prototype.copy=function(t,r,n,o){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!o&&o!==0&&(o=this.length),r>=t.length&&(r=t.length),r||(r=0),o>0&&o<n&&(o=n),o===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-r<o-n&&(o=t.length-r+n);const u=o-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,o):Uint8Array.prototype.set.call(t,this.subarray(n,o),r),u},s.prototype.fill=function(t,r,n,o){if(typeof t=="string"){if(typeof r=="string"?(o=r,r=0,n=this.length):typeof n=="string"&&(o=n,n=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!s.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(t.length===1){const c=t.charCodeAt(0);(o==="utf8"&&c<128||o==="latin1")&&(t=c)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let u;if(typeof t=="number")for(u=r;u<n;++u)this[u]=t;else{const c=s.isBuffer(t)?t:s.from(t,o),g=c.length;if(g===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(u=0;u<n-r;++u)this[u+r]=c[u%g]}return this};const q={};function rt(e,t,r){q[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(o){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:o,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}rt("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),rt("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),rt("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=xt(String(r)):typeof r=="bigint"&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=xt(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n},RangeError);function xt(e){let t="",r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function Zt(e,t,r){W(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&X(t,e.length-(r+1))}function Bt(e,t,r,n,o,u){if(e>r||e<t){const c=typeof t=="bigint"?"n":"";let g;throw u>3?t===0||t===BigInt(0)?g=`>= 0${c} and < 2${c} ** ${(u+1)*8}${c}`:g=`>= -(2${c} ** ${(u+1)*8-1}${c}) and < 2 ** ${(u+1)*8-1}${c}`:g=`>= ${t}${c} and <= ${r}${c}`,new q.ERR_OUT_OF_RANGE("value",g,e)}Zt(n,o,u)}function W(e,t){if(typeof e!="number")throw new q.ERR_INVALID_ARG_TYPE(t,"number",e)}function X(e,t,r){throw Math.floor(e)!==e?(W(e,r),new q.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new q.ERR_BUFFER_OUT_OF_BOUNDS:new q.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}const vt=/[^+/0-9A-Za-z-_]/g;function tr(e){if(e=e.split("=")[0],e=e.trim().replace(vt,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function et(e,t){t=t||1/0;let r;const n=e.length;let o=null;const u=[];for(let c=0;c<n;++c){if(r=e.charCodeAt(c),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&u.push(239,191,189);continue}else if(c+1===n){(t-=3)>-1&&u.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&u.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&u.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;u.push(r)}else if(r<2048){if((t-=2)<0)break;u.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;u.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;u.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return u}function rr(e){const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function er(e,t){let r,n,o;const u=[];for(let c=0;c<e.length&&!((t-=2)<0);++c)r=e.charCodeAt(c),n=r>>8,o=r%256,u.push(o),u.push(n);return u}function Et(e){return a.toByteArray(tr(e))}function V(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function R(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function nt(e){return e!==e}const nr=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=r*16;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function P(e){return typeof BigInt>"u"?ir:e}function ir(){throw new Error("BigInt not supported")}})(Ot);const L=_t(),G={async getAccountBalance(i){if(!i)return;const a=await fetch(`${L.coreApiUrl}/extended/v1/address/${i}/stx`);if(a.status==200){const l=await a.json();return parseInt(l.balance)}},async getNFTHoldings(i,a,l,f,h,d){if(!i||!a||!l||!f)return;let p=`${L.coreApiUrl}/extended/v1/tokens/nft/holdings?principal=${f}&asset_identifiers=${i}.${a}::${l}`;h&&(p=p+`&limit=${h}`),d&&(p=p+`&offset=${d}`);const s=await fetch(p);if(s.status==200)return await s.json()},async resolveAddress(i){const a="Address invalid";if(!i||i.length==0)return{ret:-1,errMsg:a};if(i.indexOf(".")==-1)return{ret:0,value:i};const l=i.split(".");if(l.length!=2)return{ret:-2,errMsg:a};if(l[0].startsWith("SP")&&v.parseAddress(l[0]))return{ret:0,value:i};const f="SP000000000000000000002Q6VF78",h={contractAddress:f,contractName:"bns",functionName:"name-resolve",functionArgs:[At(l[1].toLowerCase()),At(l[0].toLowerCase())],network:L,senderAddress:f},d=await _(h);let p=B(d);return p.type=="int"?{ret:-1,errMsg:"BNS name not exists"}:{ret:0,value:p.value.owner.value}},async queryNFTHistory(i,a,l,f,h){if(f)try{const d=h||0,p=`${L.coreApiUrl}/extended/v1/tokens/nft/history?asset_identifier=${i}.${a}::${l}&value=${Rt(b(f))}&offset=${d}`,s=await fetch(p);if(s.status==200){const m=await s.json(),A=m.results.length>0?m.results[m.results.length-1]:null;if(A)return A.asset_event_type=="mint"?A.tx_id:await this.queryNFTHistory(i,a,l,f,d+50)}}catch{v.alert(`Request server fail, tokenId=${f}, please try again 1 minute later.`)}},async queryAddressNonceInfo(i){if(!i)return;const a=await fetch(`${L.coreApiUrl}/extended/v1/address/${i}/nonces`);if(a.status==200)return await a.json()},async queryTokenBalance(i,a,l){const f=[at(l)],h={contractAddress:i,contractName:a,functionName:"get-balance",functionArgs:f,network:L,senderAddress:i};try{const d=await _(h),p=B(d);return BigInt(p.value)}catch(d){console.log("queryTokenBalance error: ",d)}},openTxInBrowser(i){if(i){const a=`https://explorer.hiro.so/txid/${i}?chain=${z()}`;window.open(a,"_blank")}},tipTxid(i,a){a?a=a+" ":a="";let l=null;l=`https://explorer.hiro.so/txid/${i}?chain=${z()}`,v.alert(`${a}<a style="color:white" href="${l}" target="_blank">Visit transaction.</a>`)},async loadMempoolTxs(i,a,l,f){if(!i||!a)return;let h="";l&&(h=h+"&offset="+l),f&&(h=h+"&unanchored=true");const d=`${L.coreApiUrl}/extended/v1/tx/mempool?address=${i}&limit=${a}${h}`,p=await fetch(d);if(p.status==200)return await p.json()},generatePendingTip(i){if(i.length==1)return`<div style="color:#dd0">Find pending tx(<a href='${`https://explorer.hiro.so/txid/${i[0].txId}?chain=${z()}`}' style="color:#dd0" target="_blank">click to view</a>), your may fail if continue!</div>`;{let a=[];a.push('<div style="color:#dd0">Find multiple pending txs, your may fail if continue!</div>');for(let l=0;l<i.length;l++){const h=`https://explorer.hiro.so/txid/${i[l].txId}?chain=${z()}`;a.push(`<div style="color:#dd0">${l+1}. <a href='${h}' style="color:#dd0" target="_blank">click to view</a></div>`)}return a.join("")}}};window.Buffer=window.Buffer||Ot.Buffer;const N=_t(),y=gr(),Br={async resolveSTX10InfoByTick(i){if(!i)return;const a=[It(i)],l={contractAddress:y.defaultContractAddress,contractName:y.inscriptionsContract.name,functionName:"get_stx10_info_by_tick",functionArgs:a,network:N,senderAddress:y.defaultContractAddress},f=await _(l);if(!B(f.data.attr))return{block:0,tokenId:0,max:0,lim:0,supply:0};const d=f.data.attr.value.data;return{block:B(d.block),tokenId:B(d.tokenId),max:B(d.max),lim:B(d.lim),supply:B(f.data.supply)}},async loadSTX10Balance(i,a){if(!i||!a)return;const l=[It(i),v.parseAddress(a)],f={contractAddress:y.defaultContractAddress,contractName:y.inscriptionsContract.name,functionName:"get_stx10_balance",functionArgs:l,network:N,senderAddress:y.defaultContractAddress},h=await _(f);return B(h)},async loadSummary(){const i=[],a={contractAddress:y.defaultContractAddress,contractName:y.inscriptionsContract.name,functionName:"get_summary",functionArgs:i,network:N,senderAddress:y.defaultContractAddress},l=await _(a);return{last_token_id:B(l.data.last_token_id),last_stx10_tick_index:B(l.data.last_stx10_tick_index)}},async queryNFTOwner(i){if(!i)return;const a=[b(i)],l={contractAddress:y.defaultContractAddress,contractName:y.inscriptionsContract.name,functionName:"get-owner",functionArgs:a,network:N,senderAddress:y.defaultContractAddress},f=await _(l),h=B(f);return h.value?h.value.value:null},async queryTickList(i){if(!i)return;let a=Ct();a.list=[];for(const s of i)a.list.push(b(s));const l=[a],f={contractAddress:y.defaultContractAddress,contractName:y.inscriptionsContract.name,functionName:"get_stx10_infos_by_index_list",functionArgs:l,network:N,senderAddress:y.defaultContractAddress},h=await _(f),d=B(h);let p=[];for(const s of d){const m=s.value;if(m.attr.value){const A=m.attr.value.value;p.push({tick:m.tick.value,supply:BigInt(m.supply.value),block:parseInt(A.block.value),lim:BigInt(A.lim.value),max:BigInt(A.max.value),tokenId:BigInt(A.tokenId.value)})}else break}return p},async queryWrapSummary(i,a,l){const f=[at(l)],h={contractAddress:i,contractName:a,functionName:"get_summary",functionArgs:f,network:N,senderAddress:i};try{const d=await _(h),p=B(d);return{stx10Balance:BigInt(p.stx10_balance.value),sip10Balance:BigInt(p.sip10_balance.value)}}catch(d){return console.log("queryWrapSummary error",d),{sip10Balance:0n,stx10Balance:0n}}},async queryTokenBalances(i,a){return i.tokenType=="stx10"?await this.queryWrapSummary(i.contractAddress,i.contractName,a):{sip10Balance:await G.queryTokenBalance(i.contractAddress,i.contractName,a)}},async queryIndexer(i){if(!i||i.length<=0||i.length>25)return;const a=new TextEncoder;let l=Ct();l.list=[];for(const s of i)l.list.push(yr(a.encode(s)));const f=[l],h={contractAddress:y.indexerContract.address,contractName:y.indexerContract.name,functionName:"find_token_ids",functionArgs:f,network:N,senderAddress:y.defaultContractAddress},d=await _(h);let p=[];for(let s=0;s<d.list.length;s++){const m=B(d.list[s]);p.push({content:i[s],tokenId:m?parseInt(m.value):0})}return p},async queryOrder(i){const a=[b(i)],l={contractAddress:y.defaultContractAddress,contractName:y.marketContract.name,functionName:"get_order",functionArgs:a,network:N,senderAddress:y.defaultContractAddress},f=await _(l);return f.type==9?null:{orderMode:B(f.value.data.mode),state:B(f.value.data.state),block:B(f.value.data.block),token:B(f.value.data.token),offer:B(f.value.data.offer),amount:BigInt(B(f.value.data.amount)),price:BigInt(B(f.value.data.price)),taker:B(f.value.data.taker)}},async createOrder(i,a,l,f,h){f*=1000000n;const d=[b(2),J(i,a),b(l),b(f)];let p=[];p.push(ot(K(),M.LessEqual,f));const s={contractAddress:y.defaultContractAddress,contractName:y.marketContract.name,functionName:"create_order",functionArgs:d,network:N,appDetails:Z(),postConditions:p,onFinish:m=>{h&&h(),G.tipTxid(m.txId,"List transaction has been sent.")}};Q(s)},async takeOrder(i,a,l){const f=it().getTokenData(a.tokenName),h=[b(a.orderId),J(f.contractAddress,f.contractName),b(a.amount),b(a.price)];let d=[];const p=Ft(f.contractAddress,f.contractName,f.tokenName);i==1?(d.push(ot(K(),M.Equal,a.price)),d.push(Tt(y.defaultContractAddress,y.marketContract.name,M.Equal,BigInt(a.amount)*BigInt(Math.pow(10,f.decimal)),p))):(d.push(st(y.defaultContractAddress,y.marketContract.name,M.Equal,a.price)),d.push(mr(K(),M.Equal,BigInt(a.amount)*BigInt(Math.pow(10,f.decimal)),p)));const s={contractAddress:y.defaultContractAddress,contractName:y.marketContract.name,functionName:"take",functionArgs:h,network:N,appDetails:Z(),postConditions:d,onFinish:m=>{l&&l(),G.tipTxid(m.txId,"Buy transaction has been sent.")}};Q(s)},async cancelOrder(i,a){let l="cancel";const f=it().getTokenData(i.tokenName),h=[b(i.orderId),J(f.contractAddress,f.contractName),b(i.amount),b(i.price)];let d=[];if(i.orderMode==1){const s=Ft(f.contractAddress,f.contractName,f.contractName);d.push(Tt(y.defaultContractAddress,y.marketContract.name,M.Equal,BigInt(i.amount)*BigInt(Math.pow(10,f.decimal)),s))}else d.push(st(y.defaultContractAddress,y.marketContract.name,M.Equal,i.price));const p={contractAddress:y.defaultContractAddress,contractName:y.marketContract.name,functionName:l,functionArgs:h,network:N,appDetails:Z(),postConditions:d,onFinish:s=>{a&&a(),G.tipTxid(s.txId,"Cancel transaction has been sent.")}};Q(p)},async changePrice(i,a,l){let f="change_price";const h=it().getTokenData(i.tokenName),d=[b(i.orderId),J(h.contractAddress,h.contractName),b(i.amount),b(a)];let p=[];i.orderMode==2&&(a>i.price?p.push(ot(K(),M.LessEqual,a-i.price)):p.push(st(y.defaultContractAddress,y.marketContract.name,M.Equal,i.price-a)));const s={contractAddress:y.defaultContractAddress,contractName:y.marketContract.name,functionName:f,functionArgs:d,network:N,appDetails:Z(),postConditions:p,onFinish:m=>{l&&l(),G.tipTxid(m.txId,"Change price transaction has been sent.")}};Q(s)}};export{G as C,v as U,Br as a,mr as m};
